{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: 'ProduitsView',\n  props: ['produits', 'actualiserListeProduits', 'supprimerProduit'],\n  data() {\n    return {\n      afficherFormulaireAjout: false,\n      afficherFormulaireMiseAJour: false,\n      nouveauProduit: {\n        nom: '',\n        description: '',\n        prix: 0,\n        photo: null,\n        categorie: ''\n      },\n      produitEnCoursDeModification: {\n        nom: '',\n        description: '',\n        prix: 0,\n        categorie: ''\n      }\n    };\n  },\n  methods: {\n    handleAjouterProduit() {\n      this.afficherFormulaireAjout = true;\n    },\n    handleAnnulerAjoutProduit() {\n      this.afficherFormulaireAjout = false;\n    },\n    async handleSauvegarderNouveauProduit() {\n      if (!this.nouveauProduit.nom || !this.nouveauProduit.description || !this.nouveauProduit.prix || !this.nouveauProduit.categorie) {\n        console.error('Veuillez remplir tous les champs obligatoires.');\n        return;\n      }\n      if (this.nouveauProduit.photo === null) {\n        console.error('Veuillez sélectionner une photo.');\n        return;\n      }\n      const formData = new FormData();\n      formData.append('nom', this.nouveauProduit.nom);\n      formData.append('description', this.nouveauProduit.description);\n      formData.append('prix', this.nouveauProduit.prix);\n      formData.append('categorie', this.nouveauProduit.categorie);\n      formData.append('photo', this.nouveauProduit.photo);\n      try {\n        const response = await fetch('http://localhost:8081/api/produits', {\n          method: 'POST',\n          // <-- Ajout de la virgule ici\n          body: formData\n        });\n        if (response.ok) {\n          const data = await response.json();\n          console.log('Produit ajouté avec succès sur le serveur:', data);\n          this.actualiserListeProduits();\n          this.afficherFormulaireAjout = false;\n          this.nouveauProduit = {\n            nom: '',\n            description: '',\n            prix: 0,\n            photo: null,\n            categorie: ''\n          };\n        } else {\n          console.error('Erreur lors de l\\'ajout du produit sur le serveur.');\n        }\n      } catch (error) {\n        console.error('Erreur lors de l\\'ajout du produit sur le serveur :', error);\n      }\n    },\n    handleAnnulerMiseAJourProduit() {\n      this.afficherFormulaireMiseAJour = false;\n    },\n    mettreAJourProduit(id, produit) {\n      this.produitEnCoursDeModification = {\n        ...produit\n      };\n      this.afficherFormulaireMiseAJour = true;\n    },\n    async handleSauvegarderMiseAJourProduit() {\n      if (!this.produitEnCoursDeModification.id) {\n        console.error(\"L'ID du produit est manquant.\");\n        return;\n      }\n      const formData = new FormData();\n      formData.append('nom', this.produitEnCoursDeModification.nom);\n      formData.append('description', this.produitEnCoursDeModification.description);\n      formData.append('prix', this.produitEnCoursDeModification.prix);\n      formData.append('categorie', this.produitEnCoursDeModification.categorie);\n      formData.append('photo', this.produitEnCoursDeModification.photo);\n      try {\n        const response = await fetch(`http://localhost:8081/api/produits/${this.produitEnCoursDeModification.id}`, {\n          method: 'PUT',\n          body: formData\n        });\n        if (response.ok) {\n          const data = await response.json();\n          console.log('Produit mis à jour avec succès sur le serveur:', data);\n          this.actualiserListeProduits();\n          this.afficherFormulaireMiseAJour = false;\n        } else {\n          console.error('Erreur lors de la mise à jour du produit sur le serveur.');\n        }\n      } catch (error) {\n        console.error(\"Erreur lors de la mise à jour du produit sur le serveur :\", error);\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","name","props","data","afficherFormulaireAjout","afficherFormulaireMiseAJour","nouveauProduit","nom","description","prix","photo","categorie","produitEnCoursDeModification","methods","handleAjouterProduit","handleAnnulerAjoutProduit","handleSauvegarderNouveauProduit","console","error","formData","FormData","append","response","fetch","method","body","ok","json","log","actualiserListeProduits","handleAnnulerMiseAJourProduit","mettreAJourProduit","id","produit","handleSauvegarderMiseAJourProduit"],"sources":["C:\\Users\\user\\Downloads\\Reprise_2023\\elmaslohi-tp3\\client\\src\\views\\ProductView.vue"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <h2 class=\"my-4\">Liste des Produits</h2>\r\n    <button class=\"btn btn-success mb-3\" @click=\"handleAjouterProduit\">Ajouter un produit</button>\r\n    <!-- Modal pour ajouter un produit -->\r\n    <div class=\"modal\" :class=\"{ 'show': afficherFormulaireAjout, 'd-block': afficherFormulaireAjout }\" tabindex=\"-1\" role=\"dialog\">\r\n      <div class=\"modal-dialog\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\">Ajouter un produit</h5>\r\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" @click=\"handleAnnulerAjoutProduit\">\r\n              <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <!-- Formulaire pour ajouter un nouveau produit -->\r\n            <div class=\"mb-3\">\r\n              <input\r\n                required\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                placeholder=\"Nom du produit\"\r\n                v-model=\"nouveauProduit.nom\"\r\n              />\r\n            </div>\r\n            <!-- Ajoutez ici les autres champs du formulaire -->\r\n            <!-- Champ de téléchargement de photo -->\r\n            <div class=\"mb-3\">\r\n              <label for=\"photo\">Photo du produit :</label>\r\n              <input\r\n                type=\"file\"\r\n                id=\"photo\"\r\n                accept=\"image/*\"\r\n                @change=\"handlePhotoChange\"\r\n              />\r\n            </div>\r\n            <input\r\n              required\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              placeholder=\"Prix du produit\"\r\n              v-model=\"nouveauProduit.prix\"\r\n            />\r\n            <input\r\n              required\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              placeholder=\"Description du produit\"\r\n              v-model=\"nouveauProduit.description\"\r\n            />\r\n            <input\r\n              required\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              placeholder=\"Catégorie du produit\"\r\n              v-model=\"nouveauProduit.categorie\"\r\n            />\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-secondary\" @click=\"handleAnnulerAjoutProduit\">Annuler</button>\r\n            <button type=\"button\" class=\"btn btn-primary\" @click=\"handleSauvegarderNouveauProduit\">Sauvegarder</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Modal pour la mise à jour d'un produit -->\r\n    <div class=\"modal\" :class=\"{ 'show': afficherFormulaireMiseAJour, 'd-block': afficherFormulaireMiseAJour }\" tabindex=\"-1\" role=\"dialog\">\r\n      <div class=\"modal-dialog\" role=\"document\">\r\n        <div class=\"modal-content\">\r\n          <div class=\"modal-header\">\r\n            <h5 class=\"modal-title\">Mettre à jour un produit</h5>\r\n            <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" @click=\"handleAnnulerMiseAJourProduit\">\r\n              <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n          </div>\r\n          <div class=\"modal-body\">\r\n            <!-- Formulaire pour mettre à jour un produit -->\r\n            <div class=\"mb-3\">\r\n              <input\r\n                required\r\n                type=\"text\"\r\n                class=\"form-control\"\r\n                placeholder=\"Nouveau nom du produit\"\r\n                v-model=\"produitEnCoursDeModification.nom\"\r\n              />\r\n            </div>\r\n            <!-- Champ de téléchargement de photo -->\r\n            <div class=\"mb-3\">\r\n              <label for=\"photoMiseAJour\">Nouvelle photo du produit :</label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"photoMiseAJour\"\r\n                              />\r\n            </div>\r\n            <!-- Ajoutez ici les autres champs du formulaire -->\r\n            <input\r\n              required\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              placeholder=\"Nouveau prix du produit\"\r\n              v-model=\"produitEnCoursDeModification.prix\"\r\n            />\r\n            <input\r\n              required\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              placeholder=\"Nouvelle description du produit\"\r\n              v-model=\"produitEnCoursDeModification.description\"\r\n            />\r\n            <input\r\n              required\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              placeholder=\"Nouvelle catégorie du produit\"\r\n              v-model=\"produitEnCoursDeModification.categorie\"\r\n            />\r\n          </div>\r\n          <div class=\"modal-footer\">\r\n            <button type=\"button\" class=\"btn btn-secondary\" @click=\"handleAnnulerMiseAJourProduit\">Annuler</button>\r\n            <button type=\"button\" class=\"btn btn-primary\" @click=\"handleSauvegarderMiseAJourProduit\">Sauvegarder</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"row\">\r\n      <div v-for=\"produit in produits\" :key=\"produit.id\" class=\"col-md-4\">\r\n        <div class=\"card\">\r\n         <div class=\"col-md-6\"><img class=\"card-img-top mb-5 mb-md-0\" :src=\"require(`@/assets/img/${produit.photo}`)\" :alt=\"product.name\" /></div>\r\n          <div class=\"card-body\">\r\n            <h5 class=\"card-title\">Nom: {{ produit.nom }}</h5>\r\n            <p class=\"card-text\">Prix: {{ produit.prix }} $</p>\r\n            <p class=\"card-text\">Description: {{ produit.description }}</p>\r\n            <p class=\"card-text\">Catégorie: {{ produit.categorie }}</p>\r\n\r\n            <button class=\"btn btn-primary btn-block\" @click=\"mettreAJourProduit(produit.id, produit)\">Mettre à jour</button>\r\n            <button class=\"btn btn-danger btn-block\" @click=\"supprimerProduit(produit.id)\">Supprimer</button>\r\n          </div>\r\n      </div>\r\n    </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\n\r\nexport default {\r\n  name: 'ProduitsView',\r\n  props: ['produits', 'actualiserListeProduits', 'supprimerProduit'],\r\n  data () {\r\n    return {\r\n      afficherFormulaireAjout: false,\r\n      afficherFormulaireMiseAJour: false,\r\n      nouveauProduit: {\r\n        nom: '',\r\n        description: '',\r\n        prix: 0,\r\n        photo: null,\r\n        categorie: ''\r\n      },\r\n      produitEnCoursDeModification: {\r\n        nom: '',\r\n        description: '',\r\n        prix: 0,\r\n        categorie: ''\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n\r\n    handleAjouterProduit () {\r\n      this.afficherFormulaireAjout = true\r\n    },\r\n    handleAnnulerAjoutProduit () {\r\n      this.afficherFormulaireAjout = false\r\n    },\r\n    async handleSauvegarderNouveauProduit() {\r\n  if (\r\n    !this.nouveauProduit.nom ||\r\n    !this.nouveauProduit.description ||\r\n    !this.nouveauProduit.prix ||\r\n    !this.nouveauProduit.categorie\r\n  ) {\r\n    console.error('Veuillez remplir tous les champs obligatoires.');\r\n    return;\r\n  }\r\n\r\n  if (this.nouveauProduit.photo === null) {\r\n    console.error('Veuillez sélectionner une photo.');\r\n    return;\r\n  }\r\n\r\n  const formData = new FormData();\r\n  formData.append('nom', this.nouveauProduit.nom);\r\n  formData.append('description', this.nouveauProduit.description);\r\n  formData.append('prix', this.nouveauProduit.prix);\r\n  formData.append('categorie', this.nouveauProduit.categorie)\r\n  formData.append('photo', this.nouveauProduit.photo);\r\n\r\n  try {\r\n    const response = await fetch('http://localhost:8081/api/produits', {\r\n      method: 'POST', // <-- Ajout de la virgule ici\r\n      body: formData\r\n    });\r\n\r\n    if (response.ok) {\r\n      const data = await response.json();\r\n      console.log('Produit ajouté avec succès sur le serveur:', data);\r\n      this.actualiserListeProduits()\r\n      this.afficherFormulaireAjout = false\r\n      this.nouveauProduit = {\r\n        nom: '',\r\n        description: '',\r\n        prix: 0,\r\n        photo: null,\r\n        categorie: ''\r\n      };\r\n    } else {\r\n      console.error('Erreur lors de l\\'ajout du produit sur le serveur.')\r\n    }\r\n  } catch (error) {\r\n    console.error('Erreur lors de l\\'ajout du produit sur le serveur :', error)\r\n  }\r\n},\r\n\r\n    handleAnnulerMiseAJourProduit () {\r\n      this.afficherFormulaireMiseAJour = false\r\n    },\r\n    mettreAJourProduit (id, produit) {\r\n      this.produitEnCoursDeModification = { ...produit }\r\n      this.afficherFormulaireMiseAJour = true\r\n    },\r\n    async handleSauvegarderMiseAJourProduit() {\r\n  if (!this.produitEnCoursDeModification.id) {\r\n    console.error(\"L'ID du produit est manquant.\");\r\n    return;\r\n  }\r\n\r\n  const formData = new FormData();\r\n  formData.append('nom', this.produitEnCoursDeModification.nom);\r\n  formData.append('description', this.produitEnCoursDeModification.description);\r\n  formData.append('prix', this.produitEnCoursDeModification.prix);\r\n  formData.append('categorie', this.produitEnCoursDeModification.categorie);\r\n  formData.append('photo', this.produitEnCoursDeModification.photo);\r\n\r\n  try {\r\n    const response = await fetch(`http://localhost:8081/api/produits/${this.produitEnCoursDeModification.id}`, {\r\n      method: 'PUT',\r\n      body: formData,\r\n    });\r\n\r\n    if (response.ok) {\r\n      const data = await response.json();\r\n      console.log('Produit mis à jour avec succès sur le serveur:', data);\r\n      this.actualiserListeProduits();\r\n      this.afficherFormulaireMiseAJour = false;\r\n    } else {\r\n      console.error('Erreur lors de la mise à jour du produit sur le serveur.');\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la mise à jour du produit sur le serveur :\", error);\r\n  }\r\n}\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.row {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  justify-content: space-between;\r\n}\r\n.col-md-2 {\r\n  flex: 0 0 calc(30% - 1rem);\r\n  margin-bottom: 1rem;\r\n}\r\n</style>\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}